\section{IP address allocation dynamics}
\label{sec:allocations}

\subsection{Allocated IP block sizes}

The data show a number of highlights about allocated block sizes over the past six years.  Figure \ref{fig:IP allocations} illustrates several changes that are observable. It shows the number of allocations increasing for every prefix length in every year, though at different rates. In all years, clearly /24 prefix allocations are the most prevalent.  Interestingly, in 2003 there were only about half as
many /20 allocations as /19 ones, whereas in 2008 they were about at parity.  Thus the smaller allocation blocks grew in number at a rate higher than the shorter /19 prefixes.  At the same time, noticeably there has been almost no increase in /16 blocks. Overall, this shows the growing trend
toward smaller blocks as the IPv4 address space approaches saturation.  In summary, most IP allocations over the six-year period are /24 blocks. The next
most popular block size is /16, followed by /19 and /20. Finally, smaller block
sizes (/19 and smaller) have had a larger increase in usage than /16, /17, and
/18.

\begin{figure}[htbp]
 	\centering
 		\includegraphics[width=0.5\textwidth]{02_prefixes/02_ip_prefixes_zoom}
	\caption{Allocated prefix distribution}
 	\label{fig:IP allocations}
\end{figure}

\subsection{Yearly distribution of IP allocations}

% \begin{figure}[htbp]
%  	\centering
%  		 \includegraphics[width=0.5\textwidth]{04_plus_minus/addremoveprefixallocculmulative}
% 	\caption{Trends in IP prefix allocation}
%  	\label{fig:IP allocations new and gone}
% \end{figure}

Aggregated together, the number of new allocations over the time period studied is over 40,000. Figure \ref{fig:IP allocations new and gone} charts the occurrence of other events that factor into the net allocation count increase.  These include prefix splitting, prefix extension, and deallocation. Prefix splitting is the dividing of one prefix into multiple smaller prefixes.  Prefix extension is the aggregating of an existing prefix with its adjacent, previously unallocated address space (e.g. a /16 prefix might become a /15 prefix by including the adjacent /16 address space).  Deallocation is the withdrawing of a prefix allocation, essentially releasing IP space for later use.  Figure \ref{fig:IP allocations new and gone}, charts these factors that increase the count of allocations.  Some
of the increase is attributable to new allocations.  A smaller amount was due to
prefix splitting. A small decrease in the allocations count resulted from prefix extension.  Finally, a larger decrease was due to deallocation, although the number of new allocations has greatly outpaced the disappearances.

\begin{figure}[htbp]
    \centering
        \includegraphics[width=\columnwidth]{04_3_plus_minus/changes}
    \caption{Changes in IP allocations}
    \label{fig:IP allocations new and gone}
\end{figure}

There is one illustration that particularly shows the dynamic character of IP allocation records.  Figure \ref{fig:alloc ages total} plots the number of prefixes allocated each
year, according to snapshots taken in the years from 2003 to 2009 (shown in
different colors). It is interesting to note that in more recent years, the record of prefixes allocated during the 1990s has increased. This increase is especially prominent in the past year.  Among other reasons, this is indicative of prefix splitting, where a larger allocated block is
split into multiple blocks. When blocks are split, the resulting blocks retain
the year of origin of the block under which they were originally allocated. Figure \ref{fig:alloc ages total} shows that while many
of the existing allocations originated in the 90s, many
of these also are blocks split off larger ones that were allocated at the time.

\begin{figure}[htbp]
	\centering
		\includegraphics[width=\columnwidth]{10_alloc_ages/alloc_total}
	\caption{Records of IP allocations, from the perspective the given years 2003--2009.  Note that in successive years, the known number of allocations recorded tends to rise. \(odd-numbered years shown only, for clarity\)}
	\label{fig:alloc ages total}
\end{figure}

\subsection{Unaligned allocation}

A rare occurrence among IP allocations draws a little attention.  Unaligned IP blocks are any allocations of a size that is not some power of 2. For
instance, a block of 1000 addresses has been allocated several times by RIRs in the past, instead of 1024. Allocations are almost entirely of a size of some power of two, so that a single prefix will
suffice. While the latter block of 1024 can be represented by a single /22 prefix, the former requires a /23, /24, /25, /26, /27, and /29 prefix to express the allocation.
The number of unaligned allocations is very small because they clearly are
wasteful of BGP table space and have insignificant advantages over aligned ones, if any. Figure
\ref{fig:unaligned IP allocations} shows the distribution of such allocations.
Most were between 1992 and 1995, although a few continue to be allocated every
year since then. Obviously, compared to the size of the routing table (>300K entries) these allocations are negligible in number.  Nonetheless it is interesting to note their continued existence.

\begin{figure}[htbp]
 	\centering
 		\includegraphics[width=0.5\textwidth]{09_alloc_adhoc/adhoc}
	\caption{Unaligned IP allocations per year}
 	\label{fig:unaligned IP allocations}
\end{figure}

\subsection{Allocation by geographical region}

The following diagrams and tables present a country-based analysis for the
number of allocated IP prefixes. The analysis of a fixed time snapshots of IP
allocations shows which countries allocate more prefixes and gives an
understanding of the Internet penetration throughout the world.

Table~\ref{tab:top25 rir prefixes 2003} presents the 25 countries that have
allocated the most prefixes along with the indications of what actual IP
address space is covered by the sets of allocated IP blocks.
Table~\ref{tab:top25 rir ip space 2003} gives an alternative representation
for the BGP data snapshot from 2003, where countries are ordered by the number
of used (allocated) IP space.

Table~\ref{tab:top25 rir prefixes 2009} and Table~\ref{tab:top25 rir ip space
2009} present an up-to-date estimate of top 25 contributors to the global
routing table and top 25 countries with the most announced address space. The
tables show that there have been changes in the amount of allocations of some
countries relative to others. For example, Canada was a clear second back in
2003, but now it is tied with European countries and behind Australia. It is
also interesting to note that Japan is second in terms of allocated IP space,
but only eighth in number of allocated blocks, meaning that Japan's
allocations efficiently cover their IP space.

Figures~\ref{fig:rir prefixes 2003}--\ref{fig:rir ip space asia 2009} show the
annual number of allocations by colors on a map of the world. The figure pairs
(Figure~\ref{fig:rir prefixes 2003} and Figure~\ref{fig:rir prefixes 2009},
Figure~\ref{fig:rir ip space 2003} and Figure~\ref{fig:rir ip space 2009})
allows trace the regional Internet growth dynamics. Figure~\ref{fig:rir
prefixes asia 2009} and Figure~\ref{fig:rir ip space asia 2009} emphasize one
more time the varying size of IP allocations (e.g., Japan covers much more IP
space with few allocated blocks).

\input{04_allocations_tables}
\input{04_allocations_maps}

