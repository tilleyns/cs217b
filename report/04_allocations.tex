\section{IP address allocation dynamics}
\label{sec:allocations}

In this section we present an evaluation of IP block allocations. We examine 
allocation block sizes over time, as well as a yearly distribution of IP 
allocations. We also measured the IP block allocation dynamics geographically,
to see differences across different nations.

\subsection{Allocated IP block sizes}

The data show a number of highlights about allocated block sizes over the past
six years. Figure \ref{fig:IP allocations} illustrates several changes that
are observable. It shows the number of allocations increasing for every prefix
length in every year, though at different rates. In all years, clearly /24
prefix allocations are the most prevalent. Interestingly, in 2003 there were
only about half as many /20 allocations as /19 ones, whereas in 2008 they were
about at parity. Thus the smaller allocation blocks grew in number at a rate
higher than the shorter /19 prefixes. At the same time, noticeably there has
been almost no increase in /16 blocks. Overall, this shows the growing trend
toward smaller blocks as the IPv4 address space approaches saturation. In
summary, most IP allocations over the six-year period are /24 blocks. The next
most popular block size is /16, followed by /19 and /20. Finally, smaller
block sizes (/19 and smaller) have had a larger increase in usage than /16,
/17, and /18.

\begin{figure}[htbp]
 	\centering
 		\includegraphics[width=0.5\textwidth]{02_prefixes/02_ip_prefixes_zoom}
	\caption{Allocated prefix distribution}
 	\label{fig:IP allocations}
\end{figure}

\subsection{Yearly distribution of IP allocations}

% \begin{figure}[htbp]
%  	\centering
%  		 \includegraphics[width=0.5\textwidth]{04_plus_minus/addremoveprefixallocculmulative}
% 	\caption{Trends in IP prefix allocation}
%  	\label{fig:IP allocations new and gone}
% \end{figure}

Aggregated together, the number of new allocations over the time period
studied is over 40,000. Figure \ref{fig:IP allocations new and gone} charts
the occurrence of other events that factor into the net allocation count
increase. These include prefix splitting, prefix extension, and deallocation.
Prefix splitting is the dividing of one prefix into multiple smaller prefixes.
Prefix extension is the aggregating of an existing prefix with its adjacent,
previously unallocated address space (e.g. a /16 prefix might become a /15
prefix by including the adjacent /16 address space). Deallocation is the
withdrawing of a prefix allocation, essentially releasing IP space for later
use. Figure \ref{fig:IP allocations new and gone}, charts these factors that
increase the count of allocations. Some of the increase is attributable to new
allocations. A smaller amount was due to prefix splitting. A small decrease in
the allocations count resulted from prefix extension. Finally, a larger
decrease was due to deallocation, although the number of new allocations has
greatly outpaced the disappearances.

\begin{figure}[htbp]
    \centering
        \includegraphics[width=\columnwidth]{04_3_plus_minus/changes}
    \caption{Changes in IP allocations}
    \label{fig:IP allocations new and gone}
\end{figure}

There is one illustration that particularly shows the dynamic character of IP
allocation records. Figure \ref{fig:alloc ages total} plots the number of
prefixes allocated each year, according to snapshots taken in the years from
2003 to 2009 (shown in different colors). It is interesting to note that in
more recent years, the record of prefixes allocated during the 1990s has
increased. This increase is especially prominent in the past year. Among other
reasons, this is indicative of prefix splitting, where a larger allocated
block is split into multiple blocks. When blocks are split, the resulting
blocks retain the year of origin of the block under which they were originally
allocated. Figure \ref{fig:alloc ages total} shows that while many of the
existing allocations originated in the 90s, many of these also are blocks
split off larger ones that were allocated at the time.

\begin{figure}[htbp]
	\centering
		\includegraphics[width=\columnwidth]{10_alloc_ages/alloc_total}
	\caption{Records of IP allocations, from the perspective the given years
		     2003--2009 (odd-numbered years shown only, for clarity)}
	% \newline
	% * Note that in successive years, the known number of allocations recorded tends
	% to rise (odd-numbered years shown only, for clarity)}
	\label{fig:alloc ages total}
\end{figure}


\subsection{Unaligned allocation}

There is an occurrence among IP allocations that--while rare--warrants some
attention. Unaligned IP blocks are any allocations of a size that is not some
power of 2. For instance, an unaligned block of 12,288 addresses has been
recently allocated by ARIN (allocation of the block 67.23.0.0-67.23.47.255 on
January 23, 2009). This allocation cannot be represented as a single entry in
the BGP routing table and requires at least a /19 and /20 prefix to express it.
The number of unaligned allocations is very small because they clearly are
wasteful of BGP table space and have insignificant advantages over aligned
ones, if any. Figure~\ref{fig:unaligned IP allocations} shows the distribution
of such allocations. Most were between 1992 and 1995, although a few continue
to be allocated every year since then. Obviously, compared to the size of the
routing table ($>$300K entries) these allocations are negligible in number.
Nonetheless it is interesting to note their continued existence.

\begin{figure}[htbp]
 	\centering
 		\includegraphics[width=0.5\textwidth]{09_alloc_adhoc/adhoc}
	\caption{Unaligned IP allocations per year}
 	\label{fig:unaligned IP allocations}
\end{figure}

\subsection{Allocation by geographical region}

\input{04_allocations_tables}
\input{04_allocations_maps}

In this part we present a number of findings of IP allocations from a 
geographical viewpoint, that is, on a country-based level. The analysis of 
snapshots of IP allocations at fixed times shows which countries are 
allocated more prefixes and gives an understanding of the Internet penetration 
throughout the world.

Table~\ref{tab:top25 rir prefixes 2003} is a list of the 25 countries that 
were allocated the most prefixes in 2003.  With each country is shown what 
size of IP address space is covered by the sets of allocated IP blocks.
Table~\ref{tab:top25 rir ip space 2003} gives an alternative representation, 
re-ordered by descending IP-allocated space.  We note that, for example, 
in 2003 Japan with only 674 allocated prefixes (8th in 
Table~\ref{tab:top25 rir prefixes 2003}) covered more IP (2nd in 
Table~\ref{tab:top25 rir ip space 2003}) space than all other countries 
excluding the United States.  This indicates Japan's allocations efficiently 
cover their IP space.

Tables~\ref{tab:top25 rir prefixes 2009} and ~\ref{tab:top25 rir ip space
2009} present a current estimates for 2009 of the same data, name the 
top 25 contributors to the global routing table and top 25 countries with 
the most announced address space. A comparison of the 2003 and 2009 tables 
shows a marked re-ordering of some countries relative to others, in terms 
of the number of allocations as well as in terms of the number of allocated 
IP addresses. For example, Canada (2nd in 
Table~\ref{tab:top25 rir prefixes 2003}) had relatively small growth over 
the 6 years and is now tied in rank with other regions that made great strides, 
such as Australia (5th in Table~\ref{tab:top25 rir prefixes 2003}, 
2nd in Table~\ref{tab:top25 rir prefixes 2009}) and the European countries 
(a combined entity recognized during the 6-year interval).

Figures~\ref{fig:rir prefixes 2003}--\ref{fig:rir ip space asia 2009} show the
annual number of allocations by colors on a map of the world. The figure pairs 
\ref{fig:rir prefixes 2003} \& \ref{fig:rir prefixes 2009}, and 
\ref{fig:rir ip space 2003} \& \ref{fig:rir ip space 2009}, trace regional Internet 
growth dynamics from a global view.  These world maps repeat the information given 
in Tables~\ref{tab:top25 rir prefixes 2003}--~\ref{tab:top25 rir ip space
2009} but also include relative allocation activity levels for all countries of 
the world.  Figure~\ref{fig:rir prefixes asia 2009} and 
Figure~\ref{fig:rir ip space asia 2009} reiterate the measure of IP space usage
``efficiency'' in one section of the world undergoing tremendous Internet penetration 
and growth.  In East Asia several countries such as Japan and China, using fewer allocated 
block (lighter colors in Figure ~\ref{fig:rir prefixes asia 2009}), 
cover much more IP space (darker colors in Figure~\ref{fig:rir ip space asia 2009}), 
in comparison to a country such as India.

